{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "echo 'Please define start command for services'",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  },
  "domains": [
  ],
   "services": {
      "backend": {
           "build": {
              "builder": "DOCKERFILE",
              "dockerfile": "packages/backend/Dockerfile",
              "watchPatterns": ["packages/backend/**/*", "prisma/**/*"]
            },
          "deploy": {
            "startCommand": "cd packages/backend && npm run start",
            "healthcheckPath": "/api/auth/validate-token",
            "healthcheckTimeout": 120,
            "healthcheckInterval": 30,
            "sleepApplication": true
            },
            "env": {
            }
      },
       "customer-frontend": {
            "build": {
              "builder": "DOCKERFILE",
              "dockerfile": "packages/customer-frontend/Dockerfile",
              "watchPatterns": ["packages/customer-frontend/**/*"]
            },
            "deploy": {
                "startCommand": "echo 'Static site, no start command needed'",
               "healthcheckPath": "/",
                "healthcheckTimeout": 120,
               "healthcheckInterval": 30
            },
           "env": {
           }
        },
       "admin-frontend": {
           "build": {
            "builder": "DOCKERFILE",
            "dockerfile": "packages/admin-frontend/Dockerfile",
              "watchPatterns": ["packages/admin-frontend/**/*"]
            },
           "deploy": {
                "startCommand": "echo 'Static site, no start command needed'",
                 "healthcheckPath": "/",
                 "healthcheckTimeout": 120,
                 "healthcheckInterval": 30
           },
            "env": {
            }
      }
  }
} 